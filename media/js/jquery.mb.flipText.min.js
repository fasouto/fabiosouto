/*******************************************************************************
 jquery.mb.components
 Copyright (c) 2001-2009. Matteo Bicocchi (Pupunzi); Open lab srl, Firenze - Italy
 email: info@pupunzi.com
 site: http://pupunzi.com
 Licences: MIT, GPL
 ******************************************************************************/

/*
 * jQuery.mb.components: jquery.mb.flipV
 * version: 1.0
 * Â© 2001 - 2009 Matteo Bicocchi (pupunzi), Open Lab
 *
 */
(function(a){var g=a.browser.msie;jQuery.fn.encHTML=function(){return this.each(function(){var b=a(this),c=b.text();b.text(c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,escape("'")).replace(/"/g,escape('"')))})};a.mbflipText={author:"Matteo Bicocchi",version:"1.0",flipText:function(b){return this.each(function(){var c=a(this).getFlipTextDim(true)[1]+"px",d=a(this).getFlipTextDim(true)[0]+"px";g||a(this).encHTML();var h=a(this).html(),e="";e=a(this).css("background-color")? a(this).css("background-color"):"#fff";var k=parseInt(a(this).css("font-size"))>0?parseInt(a(this).css("font-size")):14,l=a(this).css("font-family")?a(this).css("font-family").replace(/\'/g,"").replace(/"/g,""):"Arial",m=a(this).css("color")?a(this).css("color"):"#000";if(a.browser.msie){b||a(this).css({"writing-mode":"tb-rl",height:c,filter:'fliph() flipv("") ',whiteSpace:"nowrap"}).css("font-weight","normal");e=a("<span style='writing-mode: tb-rl; whiteSpace:nowrap; height:"+c+"; width:"+d+"'>"+ h+"</span>")}else{var i="-90",j="end",f=0,n=a.browser.opera?parseInt(d)-parseInt(d)/4:a.browser.safari?5:"0";if(b){f=a.browser.safari?5:0;i="90, "+(parseInt(d)/2-f)+", "+parseInt(d)/2;j="start"}e=a("<object class='flip_label' style='height:"+c+"; width:"+d+';\' type=\'image/svg+xml\' data=\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="'+d+'" height="'+c+'" fill="'+e+'" stroke="none"/><text x="-'+f+'" y="'+n+'" font-family="'+l+'" fill="'+m+'" font-size="'+ k+'" style="text-anchor: '+j+'; dominant-baseline: hanging" transform="rotate('+i+')" text-rendering="optimizeSpeed">'+h+"</text></svg>'></object><div class='pointer' style='position:absolute;top:0;left:0;width:100%;height:100%;background:transparent'/>")}c=a(this).css("position")!="absolute"||a(this).css("position")!="fixed"?"relative":a(this).css("position");a(this).html(e).css({position:c,width:d})})},getFlipTextDim:function(b){!b&&!g&&a(this).encHTML();var c=a(this).html(),d=parseInt(a(this).css("font-size")); b=a(this).css("font-family").replace(/'/g,"").replace(/"/g,"");if(b==undefined)b="Arial";b=a("<span/>").css({position:"absolute",top:-100,whiteSpace:"noWrap",fontSize:d,fontFamily:b});b.html(c);a("body").append(b);c=b.outerWidth()!=0?b.outerWidth():16+c.length*d*0.6;d=b.outerHeight()!=0?b.outerHeight()+5:50;b.remove();return[d,c]}};a.fn.mbFlipText=a.mbflipText.flipText;a.fn.getFlipTextDim=a.mbflipText.getFlipTextDim})(jQuery);